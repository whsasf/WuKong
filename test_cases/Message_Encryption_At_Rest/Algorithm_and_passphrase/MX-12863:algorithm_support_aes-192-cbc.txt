1 set passphrase:

ram@bigchina ~/workspace/WuKong $ curl -s -X GET http://10.49.58.240:8081/mxos/encryption/v2/messageBodyEncryption|jq .{
  "currentKey": {
    "uid": "1002",
    "cipherName": "aes-192-cbc",
    "encryptionKey": "666666666666666666666666"
  },
  "keys": {
    "version": [
      {
        "uid": "1001",
        "cipherName": "aes-128-cbc",
        "encryptionKey": "6666666666666666"
      },
      {
        "uid": "1002",
        "cipherName": "aes-192-cbc",
        "encryptionKey": "666666666666666666666666"
      }
    ]
  }
}


2 mta send message:

3 check cassandra:

0xfe730d7071eb11e89a614fa2952c6e4e |     101 | 0x66847fbb52ae336979f7955faaeee4fb57f824680d29076677ee4f6945b865e45b6375947e2fee5afb2129d722e7caacec09d8a8843d52d8b03415746309f524bf9abe139c8da2433559f03274f04fc51073f8162aa1815dd84447157108291abb27258bb1e460dc100c50eea58ec6f004d00ea56b7dbbab55497aa1da1ce401501deed23ac5305e2cd7c32b1429b3d094e9ed2c1389817450d8f20d5dfe3ced0e93f4bea3ad5247d268f812426fe3b4d4e02d882b7a72078fc50225f201e14fade510826d914bfad56ee8a95c9c4dc49d0ac5e4c8d2c90274e6c25e6928ec22a311eae83c28dc5dcaf4a4ff5a1a107e46645795afaee0f3ef3dc92bb455e87d216fa437faafc08fa31b2b87ba53bc862d944c74bc462cea0e621176a5741e8bbc3b386f1246c38b636ca7f5f4937db7a90b77b3271639049053eeeaa365910750155cd8b16e1f132a79aff2473b13632faacd2cf9956aea63d0188403d46b385983a340aa1e7808bb84f4370683414928932ef7d33e39597d1f533b5a2152660040c3cf5429b0c159ef5b840fe8f6790bca9f37d15210a606f3fc70280e79c726c51b888482a2e3976596a2dc0c4fdf36441fb23ea9da3c22a481ae103ee67638ff8c64faf3106379083628b57c2d93042f63b3496f671d2a2f9754c813a718e35bb07e9f6b8aecb44f7da9bc793a16a3301ff07da95f398b3e7fc074a8299221af2f5ef0017e92e8644615457cb1908eb45dc0549ff8371856e973df2f843e4223a31a352b8d61342952d2e69277f34727c7e397ca8e2335e76a844f1a79b74dbf8f6c22671ac428c89aab4d68fe714ccb964d59efbf7d08d3e29c00e088e00cde317befac2955abb917625f75b66f3a298d73d94397c5dc155e82d17ff2a47dfe34f9665a24416be62bc5dbb1a12d2ecf2704dcfd6652260ede07887def90e0e28a642a48530018fd76b7cba91c0a624406c3d23dd1fe4a4e50600c89e2e61b74bc32a34003bf3e6abaaec2464644af32f2ce721a88299457c696441858e0e9de3a10a10a563ecee7e829f97b67f04c3a435e0cfb3010e69d7302a1ee00836e47c16b1956b343bdde55f7baa10e46a354eac3943eeadc8208614de6807c485e2b23f408272df925eb54af90961ca3d049a7caaebcebdea35b25ad0e7b7d2e36e658465f6902bd5dcb5314deb4cd499be92332a18948adc3809c11751961931d43407b293b9219f57a2b699a6aa961e006cf7b46752ff515842a95286693006c72c97613ed9a674eb076d3c9bb622710686b714c07f0f692634a09d689f5e81b00903f3657b1999ce37f96b498a25b25aa312e2e73643977891734dbff7077fa4f65fccb1b40f5f1296e778249fc9dee9b6673fcc113f3e37645e5b171a227c55f2f044f18aeed7897d128913e3f8643af48b41fb6f21f320acc657b62566acb603dde955bb0373c883b389568794c2c2de2e2e8b4024b0292769ba173eba38c29de6f9b53fdc01e734b63ea4c86c80d527efbadc4b32a7836e650d1db4ef502537e4333a7dd78d52fec9cf8d8ea9b07d288f763d55a0089f1b12d4e857784542115d087c0dff505ca749fa9409c29a2af3c4fb579469390b1dd6daafb0554fc0f6f0882d8aa0d83c393cb75c0332c5089ca43ba6d34620a46392fd85fff1e140178a45b3c0d6315c07083853ed53d1b0bf15ca42158a334572e81a0a997db08f08faf3c154d167a86493bd4f080d2d46edc89ada4e206fa5b42551ef904ea904f87832bc8dad670c9a7ba84609f4c3305f78df53f521fee86b7f4e6673f6cef608a0e8f05c27d4d0f39bd94a020dc7c9c36c806b9477054bf59b1a3599f23a43386b053325e5452d467ad3354580c93ae2311afcfdde15e392d291aa9a4a4f27284a723b4da98d8cc9148bb06f1b021cc638a6963412dca690acbbb7fd270471955321c9c38ce34d41eed59e17a40d38dd05956fad97ffcca4bbc975f8c081dc04f3212161a43b6dd1c2f9d4bdc66ebd91e81c1c243cfb575297621896b5afd6814703e28940507d5545257aa9d4f012539ff6d602ff3aec1c886a279d49f563ae69ac50e1cf19b5ddccd1f7a3f51b772ac8d64ccd88bf728ebda78ad30ba68c943e676847b56b84f76d3a4819a74edfc82c10000811b97c0b5542a17942e08a6a0146899be15f0c9004a2c5edd8f73ef1a0c3dfcf6076be99b8afb294d76675a96859c74cd5aa7d4539427324aa440f560336ad34fbfee3a8620ea247eb1785b856fa3b76b20959bb17d3aea51d659cca97b39b5a6b3effcc898c675d2179daa1bffa1725a55817a528a23193de8409ceba453874434fdb0c922fcadf8005712cdc1e3dba71648fc569fe8d7759b3ba619bff31012849017b99fe1005ae77476db5ce89c63cc37eb4ccb149438dce549f2875352370cf6a9473f628e73d4b6d67e1a11f61842c4fba75931694b834879135cf136e3f7adf96d956d948e9efe137a1cf851c821fb5aaf2112efbcf6e2ad98a76380444d8318484e7f42b1cff90a7640933e5795c18fccea909035e1db352b2061223743abf7d6200f4957d505e936477f48a52f4da3cfb0faf10b69f13244c7eb50f6f17bc56bd222d69d81cdab3e530cf56e3cddd592f814f2c3fb
stilll using 128

restart mss

 key     | 0x8a58cf6471ec11e8a14dd9f2bb3bd734
 column1 | 7
 value   | 0x31303032
 
  key     | 0x8a58cf6471ec11e8a14dd9f2bb3bd734
 column1 | 101
 value   | 0x4f70bee441b945e70703b88fc078b28fa71ce80ee8254ba6cfe67304e7586fb38a94bb4282278e774176ac2f35167cd3248b9f97d0e2fef249ebec05e7df74306509887e8cef2354c389b344228c09bd0ba74f661a2146b92b22734a84c30a65617b8b6ee857e5d4139314d69a399ba80f728ae53e35264b51aa04a0900667dc9c1786bf2b539a0c3f8921e4a512da3970d2de40c302590d3f2668f4ba3c0b2565d4904674cd8babfd36059dbb21f8b21eeea72b9c9f4eb5662f006ed9ba127e7be068de992964bbbb7e8aecef74a523880439a90f99a703d50a3a224583a702d55c2caf1211e339d2312f3a7e93c81fe5a1f016aad4beae2b931bd8227c94d911573f08b853f1b8c48580057814bb6c3193c54acf2062aed6334561645db8c43a72058b8ad542264e87eea43ee7cf2b4345b8d44b73f234380da33955e62aeb8f57e00d1c5d0454c987349efee3ff90c2e0ca1e39d09b449f445db651d3785c1527509d912365790b6806220827cf3f91644afb49e9d1ed0a55bbc8d00ad4b0ec1d37f3aeb812656315dacf8f506764b163a1571bf135e1d2ef3d5c9dde4cdcb3be1fd90ae55e6c31aa68ba899e8206341bd0fb11e8c738b45f5f61bd2ecd5fd9ee5a7e47392e9edbec80400e6af967e8848351580ac1f1483f25694d44991cab30bbdd7e0ee6f936b36c2af8591cf834d945c7f1573f6c192c1cefeeb1bd4f921ac10522abdd02b6adc7d0c840af8b28b4b295a837c9027db8acf1eda9785cf6f6b45dd48ff131a51311b6ddfc42c1cd15cb1b73384656ed417d5fe69ac5dcbc88111c3b027de6ed15cf7e209aa3216d52dc4ec64396473f0b644931b7dcc098b67cf04f6707c71a3087edf740a7371e1603dec064a74482ab601638e068df876cc3a509b994ef66093ece3961f9159d8fd9b8d3ebef945c30eeeb39ca55b955cc34bead190de48e19692af2776beaea869c0c77502d2ac8f799df6636444f1923c931f5b87707d511e5b7ca05006126f5d4da897b55116710c7b0730564bcf75e17959925ef57f4ac27f5e5b0f9f5e97399dde8347def9a387168e62315419e17cc18665baba17e5842b0f92d80afda22e5f51d19a4aebeb87e1187e936a8cfb29b00f254c7d00c8edd27eab58c380c70f848ccc0e6745b7209ffa790939d162dccd70bead7c790a10662f35b322548835b7137c7ae650716e5360a41f9eb3fc98d5edb329e8ac25d16e4f5010c405c67cf8979be46f524265a92266615bebe4f282ca96b2f8ba022bd220db3caf5552b75add33bef967ef336cfd21fea6b85a26ff945328118c3570f811eea4d6256f52325c6b83ef6b70e33c5ca426dd294c73ed5e08913d1b71a32dc715e8431fe998c2ddebabad48619e1936d640ffd3c1ad9c71e62c0c601c8f8b6d161f90de796ae969e2368b278a578e6fd0a51dc68702d07784a048ca9e37b625016505d661c06e6b40cc24e1ccdf793905619149d71b3462882b5e4bc47946d15dbb4ef67496a2cbab2c4e7c313df30416792562ca7cecaab54e5a454c31845aa20182ce8e26d418f9ab8aadcb60d4b9eba0ce5450145ab0195852c365905062b4ec388bd4d5c42b81399b42585cfbabff8c8b69891c30b626229a88807d4bcd1c3bbba8ff7f7c1599a27030c3ba05fd38f29afbf4b41082fbeb9193bdeba254fd75d8e8ad8a127931c7c5e7d8cbab61ab7252279dad474881e3b9b216470e6518db8a44ef21b9b62597eec6b649d147698a8e22382f0c7f0d098e8631071ad0117fac3c26015097e843ba444eeaa183619175e1f0478ac34f27ab74967a0bcefd2149eba913cac2bd1d492e21332ffaf7ae8b3e6adfd63bd9638cda20865063b30cdf1472fc65876a69a6c8d5b3792a618f779d4899e8405e7062f321a38c6e27918387d6a39716e0a036cba68aad000499421f78137dfbdfdcf4a9eeaa043bbde71e706b46a53adc82bd92003be5ccc854c84d1251caeaefdb4c987531dec1b49f2b52f92d53c2bd5223f42f8c7ff4729b8ec2c86fae6d43ce2a19afc8a497781e51478a0fe584a204b79cc8977122f7b49ab33b9828bbeeaa5b82209b602939bba0ae9c38ad4c3329739b73bffc278c1dd33148474100e21660d021eaf24c6f932756db13ba2dd53183cb7e6197704da28270a7e6f7ae65deaf0961d5d15fdf7bcafe8d2206358bb3ff06357738694b378cefa42d4a8a85975ad6ed0c96aa78abf268e8781b5c1ade1151a7817b0ef34628fe0e4118f6717ed31088996c26b5d4f19ea07ecb5d80740efeb2a909d92852109edcaa31de7c356c4e9719c310143f263bf4d7008f52a5afcb3c496c3a417a0cad8e901e9bb2f7ae1db718851d31be7ce00e914186c13bd247bd66ab2ccd0bc7f924183a1d954ea3ae0e2e6551eb5497b61735998934b5b2096b060f99977f30f1952d126ce8de7caaadf0dd42951f8079b5dd5a57ba537436a99e806d8506e40e1a978ca50e72be1909c67e3ac1ba533aa2ee7f1026031c6fe0b43f92b5c4bb4dda7b723d4476197426325e33598fa2370ae46dde706cdba68b28ae1b0106e814bcbc2c7eb77e94dd8faca0e5bf0515c38221920f9a69dd487c0b1fbce01ea11337edf77fa3a8bc8f79b9bc6e02c2bdd


4 decode data from cassandra manually:

	s
ï¿½ï¿½tsu<xx2@openwave.com>SMTPï¿½ï¿½%[1.0ï¿½
multipartmixedAUNIQUEMARKER7BIT	boundaryAUNIQUEMARKERWï¿½<ï¿½textplain8bitï¿½ï¿½ï¿½textplainattachment	filenameattach.txtbase64nameattach.txt:/ Cï¿½%ï¿½B!/	:Cat5ï¿½%ï¿½Bï¿½xx2ï¿½xx1ï¿½Sending Attachementï¿½ Sun, 17 Jun 2018 00:04:44 -0400%91427e32-71e3-11e8-9554-fb8ebe13d069*ï¿½Hï¿½ï¿½4*ï¿½Hï¿½ï¿½6
.X-Intermail-Unknown-MIME-Type=unparsedmessageï¿½Return-Path: <xx2@openwave.com>
Received: from [127.0.1.1] (really [10.37.2.214]) by mx1.openwave.com
(InterMail vM.9.05.03.00 201-2473-138-1) with ESMTP
id <20180617040444.APQ27874.mx1.openwave.com@[127.0.1.1]>
for <xx1@openwave.com>; Sun, 17 Jun 2018 00:04:44 -0400
From: xx2
To: xx1
Subject: Sending Attachement
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary=AUNIQUEMARKER
Date: Sun, 17 Jun 2018 00:04:44 -0400
Message-Id: <20180617040444.APQ27874.mx1.openwave.com@[127.0.1.1]>

This is a multi-part message in MIME format.
--AUNIQUEMARKER
Content-Type: text/plain
Content-Transfer-Encoding:8bit

-This is a test email to send an attachement,haha,are you OK? we love world !!!!!!ucucucucucucucucucucucucucuc
--AUNIQUEMARKER
Content-Type: text/plain; name="attach.txt"
Content-Transfer-Encoding:base64
Content-Disposition: attachment; filename="attach.txt"

d29ybGQgcGVhY2UuYXJlIHUgT0s/aGFoYWhhaGFoYWhh
--AUNIQUEMARKER--


5 IMAP fetch email:

Return-Path: <xx2@openwave.com>
Received: from [127.0.1.1] (really [10.37.2.214]) by mx1.openwave.com
          (InterMail vM.9.05.03.00 201-2473-138-1) with ESMTP
          id <20180617040444.APQ27874.mx1.openwave.com@[127.0.1.1]>
          for <xx1@openwave.com>; Sun, 17 Jun 2018 00:04:44 -0400
From: xx2
To: xx1
Subject: Sending Attachement
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary=AUNIQUEMARKER
Date: Sun, 17 Jun 2018 00:04:44 -0400
Message-Id: <20180617040444.APQ27874.mx1.openwave.com@[127.0.1.1]>

This is a multi-part message in MIME format.
--AUNIQUEMARKER
Content-Type: text/plain
Content-Transfer-Encoding:8bit

-This is a test email to send an attachement,haha,are you OK? we love world !!!!!!ucucucucucucucucucucucucucuc
--AUNIQUEMARKER
Content-Type: text/plain; name="attach.txt"
Content-Transfer-Encoding:base64
Content-Disposition: attachment; filename="attach.txt"

d29ybGQgcGVhY2UuYXJlIHUgT0s/aGFoYWhhaGFoYWhh
--AUNIQUEMARKER--
 FLAGS (\Recent \Seen))

a OK FETCH completed


2 messages the same.pass